{"version":3,"sources":["assets/place.svg","main.js","sidebar.js","App.js","serviceWorker.js","index.js"],"names":["module","exports","__webpack_require__","p","MapCard","react_default","a","createElement","Card_default","style","width","CardContent_default","Timeline_default","color","this","props","data","verticalAlign","name","id","className","Typography_default","component","line_comment","React","Component","MainDisplay","_this","Object","classCallCheck","possibleConstructorReturn","getPrototypeOf","call","state","renderMapCard","bind","assertThisInitialized","item","main_MapCard","mode","lines","reverse","map","console","log","key","flex","margin","display","flexFlow","padding","Sidebar","renderResultsLayerList","features","count","_this2","type","FormControlLabel_default","control","Checkbox_default","onChange","switchLayer","checked","viewResults","label","Place_default","height","x1","y1","x2","y2","offset","stopColor","stopOpacity","fill","FormGroup_default","_this3","view","drawing","Paper_default","paddingLeft","textIndent","Divider_default","Button_default","onClick","finishLine","size","Done_default","deleteLastPoint","Remove_default","cancelEdit","Close_default","AddLocation_default","editing","Edit_default","toggleEdit","deleting","Delete_default","toggleDelete","Add_default","counter","_this4","Tooltip_default","title","prompt","placement","addInteraction","disabled","drawnFeatures","variant","upload","CloudUpload_default","Visibility_default","changeMode","Map_default","ViewModule_default","Layers_default","theme","createMuiTheme","palette","primary","indigo","secondary","teal","typography","useNextVariants","sourceArray","layerArray","resultsSourceArray","resultsLayerArray","drawInteraction","modify","pointSource","VectorSource","overlay","Heatmap","source","renderMode","shadow","Overlay","autoPan","autoPanAnimation","duration","select","Select","condition","click","layers","selectDelete","Style","stroke","image","selectHover","App","lineName","popover","targetFeatureId","comment","undefined","viewMap","featureData","getResults","getInput","switchView","updateComment","saveComment","setPosition","removeInteraction","setState","document","getElementById","cursor","event","value","removeLayer","addLayer","removeOverlay","addOverlay","writer","GeoJSON","push","writeFeatures","getSource","getFeatures","clear","axios","post","then","response","finishDrawing","removeLastPoint","get","feature","line","geoJSONLine","length","turf","lineDistance","i","Math","random","thisPoint","along","addFeature","Feature","Point","transform","geometry","coordinates","turnLineIntoArrayOfPoints","featureLayer","fromLonLat","point","target","layer","getStyle","getStroke","setColor","chroma","alpha","rgba","setLineDash","refresh","getImage","setOpacity","setImage","Icon","anchor","anchorXUnits","anchorYUnits","crossOrigin","src","PlaceSVG","scale","CircleStyle","radius","Fill","selectedFeature","preventDefault","getFeatureById","setProperties","setTarget","styles","AppBar_default","position","zIndex","flexWrap","Toolbar_default","flexGrow","DirectionsBike_default","marginBottom","Tabs_default","Tab_default","top","Whatshot_default","Drawer_default","sidebar","main","left","onSubmit","TextField_default","multiline","rows","TileLayer","TileWMS","url","params","LAYERS","TILED","serverType","transition","VectorLayer","Stroke","Draw","pointerMove","AnimatedCluster","Cluster","distance","animationDuration","text","Text","toString","Modify","container","setElement","resolution","Map","overlays","View","center","zoom","maxZoom","minZoom","controls","Zoom","getView","getResolution","zoomRadius","zoomBlur","setRadius","setBlur","on","evt","e","coordinate","selectedFeature2","selected","getId","getProperties","getGeometry","getType","getCoordinateAt","getCoordinates","layerName","setId","focus","hasFeature","removeFeature","updateSize","Boolean","window","location","hostname","match","ReactDOM","render","src_App_0","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.6a9e6a7c.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/place.f0e22054.svg\";","import React, { Component } from 'react';\nimport './App.css';\nimport Card from '@material-ui/core/Card';\nimport CardContent from '@material-ui/core/CardContent';\nimport LineIcon from '@material-ui/icons/Timeline';\nimport Typography from '@material-ui/core/Typography';\nimport 'ol/ol.css';\n\nclass MapCard extends React.Component {\n render() {\n   return (\n     <Card style={{width:'100%'}}>\n       <CardContent>\n            <LineIcon style={{color:this.props.data.color, verticalAlign:'middle'}}/> &nbsp;&nbsp; <strong>{this.props.data.name}</strong>\n        </ CardContent>\n         <div id={'cardmap-'+this.props.data.id} className='cardmap'></div>\n         <CardContent>\n           <Typography component=\"p\">\n             {this.props.data.line_comment}\n           </Typography>\n         </CardContent>\n     </Card>\n   );\n }\n}\n\n\nclass MainDisplay extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {};\n    this.renderMapCard = this.renderMapCard.bind(this);\n  }\n\n  renderMapCard(item){\n    return <MapCard data={item} />\n  }\n\n  render() {\n    var self = this;\n    if(this.props.mode === 'map'){\n      return (\" \");\n    }\n    else{\n      var lines = this.props.data.reverse().map(function(item) {\n        console.log(item);\n        return (\n          <div key={item.id} style={{width:'300px', flex:'1 auto', margin:'8px'}}>{this.renderMapCard(item)}</div>\n        );\n      }.bind(this));\n      return (\n          <div id='cards' style={{display:'flex', flexFlow:'row wrap', padding:'8px'}}>\n            {lines}\n          </div>\n      );\n    }\n  }\n\n\n\n}\nexport default MainDisplay;\n","import React, { Component } from 'react';\nimport './App.css';\n\n//Material-ui imports\nimport Button from '@material-ui/core/Button';\nimport Divider from '@material-ui/core/Divider';\n\nimport Paper from '@material-ui/core/Paper';\nimport EditIcon from '@material-ui/icons/Edit';\nimport LineIcon from '@material-ui/icons/Timeline';\nimport PointIcon from '@material-ui/icons/AddLocation';\nimport PlaceIcon from '@material-ui/icons/Place';\nimport UploadIcon from '@material-ui/icons/CloudUpload';\nimport AddIcon from '@material-ui/icons/Add';\nimport DoneIcon from '@material-ui/icons/Done';\nimport CancelIcon from '@material-ui/icons/Close';\nimport RemoveIcon from '@material-ui/icons/Remove';\nimport Tooltip from '@material-ui/core/Tooltip';\nimport DeleteIcon from '@material-ui/icons/Delete';\nimport LayersIcon from '@material-ui/icons/Layers';\nimport MapIcon from '@material-ui/icons/Map';\nimport CardsIcon from '@material-ui/icons/ViewModule';\nimport ViewIcon from '@material-ui/icons/Visibility';\n\n\n\n\n\nimport FormGroup from '@material-ui/core/FormGroup';\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\nimport Checkbox from '@material-ui/core/Checkbox';\nimport CheckBoxOutlineBlankIcon from '@material-ui/icons/CheckBoxOutlineBlank';\nimport CheckBoxIcon from '@material-ui/icons/CheckBox';\n\nclass Sidebar extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {};\n    this.renderResultsLayerList = this.renderResultsLayerList.bind(this);\n  }\n\n  renderResultsLayerList(){\n    var features = this.props.features.map(function(item, count){\n      if(item.type === 'point'){\n        return (\n          <FormControlLabel\n            key = {count}\n            control={\n              <Checkbox\n                onChange={()=>this.props.switchLayer(count)}\n                checked={item.viewResults}\n              />\n            }\n            label= {<span><PlaceIcon style={{color:item.color, verticalAlign:'middle'}} />{item.name}</span>}\n          />\n        );\n      }\n      else{\n        return (\n          <FormControlLabel\n            key = {count}\n            control={\n              <Checkbox\n                onChange={()=>this.props.switchLayer(count)}\n                checked={item.viewResults}\n              />\n            }\n            label= {\n              <span>\n                <svg width=\"10\" height=\"20\" style={{verticalAlign:\"middle\"}} >\n                  <defs>\n                    <linearGradient id=\"grad1\" x1=\"0%\" y1=\"100%\" x2=\"0%\" y2=\"0%\">\n                      <stop offset=\"0%\" style={{stopColor:\"blue\",stopOpacity:\".2\"}} />\n                      <stop offset=\"25%\" style={{stopColor:\"cyan\",stopOpacity:\".4\"}} />\n                      <stop offset=\"50%\" style={{stopColor:\"lime\",stopOpacity:\".6\"}} />\n                      <stop offset=\"75%\" style={{stopColor:\"yellow\",stopOpacity:\".8\"}} />\n                      <stop offset=\"100%\" style={{stopColor:\"red\",stopOpacity:\"1\"}} />\n                    </linearGradient>\n                  </defs>\n                  <rect width=\"10\" height=\"20\" style={{fill:\"url(#grad1)\"}} />\n                </svg>\n                &nbsp;&nbsp;{item.name}\n              </span>}\n          />\n        );\n      }\n    }.bind(this))\n    return (\n      <FormGroup>\n        {features}\n      </FormGroup>\n    )\n  }\n\n  render() {\n      if(this.props.view === 0){\n        if (this.props.drawing !== false) {\n          var item = this.props.features[this.props.drawing];\n          console.log(item);\n          if(item.type === 'line'){\n            return (\n                <Paper >\n                <div style={{padding:'8px'}}>\n                  <div style={{paddingLeft: '32px', textIndent:'-32px'}}><strong><LineIcon style={{color:item.color, verticalAlign:'middle'}} /> &nbsp;{item.name}</strong></div>\n                </div>\n                <Divider />\n                <div style={{padding:'8px'}}>\n                  <Button\n                    onClick = {()=>this.props.finishLine(this.props.drawing)}\n                    className='full-width-left'\n                    size='small'\n                  >\n                    <DoneIcon /> &nbsp;&nbsp; Finish Line\n                  </Button>\n                  <br />\n                  <Button\n                    onClick = {() => this.props.deleteLastPoint(this.props.drawing)}\n                    className='full-width-left'\n                    size='small'  >\n                      <RemoveIcon /> &nbsp;&nbsp; Delete Last Point\n                  </Button>\n                  <br />\n                  <Button\n                    onClick = {()=>this.props.cancelEdit(this.props.drawing)}\n                    className='full-width-left'\n                    size='small' >\n                      <CancelIcon /> &nbsp;&nbsp; Cancel\n                    </Button>\n                    </div>\n\n                </Paper>\n            );\n          }\n          else{\n            console.log('edit point');\n            return (\n                <Paper >\n                <div style={{padding:'8px'}}>\n                  <div style={{paddingLeft: '32px', textIndent:'-32px'}}><strong><PointIcon style={{color:item.color, verticalAlign:'middle'}} /> &nbsp;{item.name}</strong></div>\n                </div>\n                <Divider />\n                <div style={{padding:'8px'}}>\n                  <Button\n                    onClick = {()=>this.props.cancelEdit(this.props.drawing)}\n                    className='full-width-left'\n                    size='small' >\n                      <CancelIcon /> &nbsp;&nbsp; Cancel\n                    </Button>\n                    </div>\n                </Paper>\n            );\n          }\n\n        }\n        else if(this.props.editing === true){\n          return(\n            <Paper>\n              <div style={{padding:'8px'}}>\n                <div style={{paddingLeft: '32px', textIndent:'-32px'}}><strong><EditIcon style={{verticalAlign:'middle'}} /> &nbsp;&nbsp;Edit Features</strong></div>\n              </div>\n              <Divider />\n              <div style={{padding:'8px'}}>\n                <Button\n                  onClick = {this.props.toggleEdit}\n                  className='full-width-left'        >\n                  <CancelIcon /> &nbsp;&nbsp; Stop Editing\n                </Button>\n                </div>\n            </Paper>\n          )\n        }\n        else if(this.props.deleting === true){\n          return(\n            <Paper>\n              <div style={{padding:'8px'}}>\n                <div style={{paddingLeft: '32px', textIndent:'-32px'}}><strong><DeleteIcon style={{verticalAlign:'middle'}} /> &nbsp;&nbsp;Delete Features</strong></div>\n              </div>\n              <Divider />\n              <div style={{padding:'8px'}}>\n                <Button\n                  onClick = {this.props.toggleDelete}\n                  className='full-width-left'        >\n                  <CancelIcon /> &nbsp;&nbsp; Stop Deleting\n                </Button>\n                </div>\n            </Paper>\n          )\n        }\n        else {\n          return (\n              <div>\n              <Paper>\n                <div style={{padding:'8px'}}>\n                  <strong><AddIcon style={{verticalAlign:'middle'}} /> &nbsp; Create Features</strong>\n                </div>\n                <Divider />\n                <div style={{padding:'8px'}}>\n\n                {this.props.features.map(function(item, counter){\n                  return(\n                    <Tooltip title={item.prompt} placement='right' key={item.name}>\n                      <Button\n                        onClick = {((item.type === 'line') ? ()=>this.props.addInteraction(counter) : ()=>this.props.addInteraction(counter))}\n                        className='full-width-left'\n                      >\n                        {((item.type === 'line') ? <LineIcon style={{color:item.color}} /> : <PointIcon style={{color:item.color}}/>)} <span style ={{paddingLeft:'10px'}}>{item.name}</span>\n                      </Button>\n                    </Tooltip>\n                  )\n                }.bind(this))}\n                </div>\n              </Paper>\n              <br />\n              <Paper style={{padding:'8px'}}>\n              <Button\n                disabled = {(this.props.drawnFeatures > 0)? false: true}\n                onClick = {this.props.toggleEdit}\n                className='full-width-left'        >\n                <EditIcon /> &nbsp;&nbsp; Edit Features\n              </Button>\n              <Button\n                disabled = {(this.props.drawnFeatures > 0)? false: true}\n                onClick = {this.props.toggleDelete}\n                className='full-width-left'        >\n                <DeleteIcon /> &nbsp;&nbsp; Delete Features\n              </Button>\n              </Paper>\n              <br />\n              <Button\n                disabled = {(this.props.drawnFeatures > 0)? false: true}\n                variant='contained'\n                color='primary'\n                onClick = {this.props.upload}\n                className = 'full-width'\n              >\n                <UploadIcon /> &nbsp;&nbsp; Upload\n              </Button>\n              </div>\n          )\n        }\n      }\n      else{\n        return(\n          <div>\n          <Paper>\n            <div style={{padding:'8px'}}>\n              <ViewIcon style={{verticalAlign:\"middle\"}} /> &nbsp;&nbsp; <strong>View Results As</strong>\n            </div>\n            <Divider />\n            <div style={{padding:'8px'}}>\n\n              <Button\n              onClick = {() => this.props.changeMode('map')}\n                className='full-width-left'\n                size='small'\n              >\n                <MapIcon /> &nbsp;&nbsp; Map\n              </Button>\n              <br />\n              <Button\n                onClick = {() => this.props.changeMode('cards')}\n                className='full-width-left'\n                size='small'  >\n                  <CardsIcon /> &nbsp;&nbsp; Cards\n              </Button>\n              </div>\n          </Paper>\n          <br />\n          <Paper>\n            <div style={{padding:'8px'}}>\n              <LayersIcon style={{verticalAlign:\"middle\"}} /> &nbsp;&nbsp; <strong>View Layers</strong>\n            </div>\n            <Divider />\n            <div style={{padding:'8px 8px 8px 12px'}}>\n              {this.renderResultsLayerList()}\n            </div>\n          </Paper>\n          </div>\n        )\n      }\n  }\n}\nexport default Sidebar;\n","import React, { Component } from 'react';\nimport './App.css';\nimport MainDisplay from './main.js';\nimport Sidebar from './sidebar.js';\n\nimport PlaceSVG from './assets/place.svg';\n\n//openlayers imports\nimport 'ol/ol.css';\nimport Map from 'ol/Map';\nimport Point from 'ol/geom/Point';\nimport VectorSource from 'ol/source/Vector';\nimport VectorLayer from 'ol/layer/Vector';\nimport Draw from 'ol/interaction/Draw';\nimport Modify from 'ol/interaction/Modify';\nimport Style from 'ol/style/Style';\nimport Stroke from 'ol/style/Stroke';\nimport CircleStyle from 'ol/style/Circle';\nimport Fill from 'ol/style/Fill';\nimport Text from 'ol/style/Text';\nimport Icon from 'ol/style/Icon';\nimport GeoJSON from 'ol/format/GeoJSON';\nimport {fromLonLat} from 'ol/proj';\nimport {transform} from 'ol/proj';\nimport TileLayer from 'ol/layer/Tile';\nimport TileWMS from 'ol/source/TileWMS';\nimport View from 'ol/View';\nimport Zoom from 'ol/control/Zoom';\nimport Heatmap from 'ol/layer/Heatmap';\nimport Overlay from 'ol/Overlay';\nimport Feature from 'ol/Feature';\nimport Select from 'ol/interaction/Select.js';\nimport {click, pointerMove} from 'ol/events/condition.js';\nimport Cluster from 'ol/source/Cluster';\nimport {defaults as defaultInteractions} from 'ol/interaction.js';\nimport AnimatedCluster from 'ol-ext/layer/AnimatedCluster';\n\n\n\n\n//Material-ui imports\nimport AppBar from '@material-ui/core/AppBar';\nimport Toolbar from '@material-ui/core/Toolbar';\nimport Typography from '@material-ui/core/Typography';\nimport Button from '@material-ui/core/Button';\nimport IconButton from '@material-ui/core/IconButton';\n\nimport Drawer from '@material-ui/core/Drawer';\nimport Paper from '@material-ui/core/Paper';\nimport Tabs from '@material-ui/core/Tabs';\nimport Tab from '@material-ui/core/Tab';\nimport EditIcon from '@material-ui/icons/Edit';\nimport FireIcon from '@material-ui/icons/Whatshot';\nimport BikeIcon from '@material-ui/icons/DirectionsBike';\n\nimport TextField from '@material-ui/core/TextField';\nimport { createMuiTheme } from '@material-ui/core/styles';\nimport { MuiThemeProvider } from '@material-ui/core/styles';\nimport indigo from '@material-ui/core/colors/indigo';\nimport teal from '@material-ui/core/colors/teal';\nimport CancelIcon from '@material-ui/icons/Close';\n\n\nimport turf from 'turf';\nimport axios from 'axios';\nimport chroma from 'chroma-js';\n\nconst theme = createMuiTheme({\n  palette: {\n    primary: indigo,\n    secondary: teal\n  },\n  typography: {\n    useNextVariants: true,\n  }\n});\nconst drawerWidth = '220px';\n\n\n//Defining Globals\nvar sourceArray = [];\nvar layerArray = [];\nvar resultsSourceArray = [];\nvar resultsLayerArray = [];\nvar map = {};\nvar drawInteraction = [];\nvar snap;\nvar modify = [];\nvar pointSource = new VectorSource();\nvar heatmapLayer = new Heatmap({\n  source: pointSource,\n  renderMode: 'image',\n  shadow: 1000\n});\nvar overlay = new Overlay({\n  autoPan: true,\n  autoPanAnimation: {\n    duration: 250\n  }\n});\nvar select = new Select({\n  condition: click,\n  layers: layerArray\n});\nvar selectDelete = new Select({\n  condition: click,\n  layers: layerArray,\n  style: new Style({\n    stroke: null,\n    image: null\n  })\n});\n/*\nvar clusterSelect = new Select({\n  condition: pointerMove,\n  layers: resultsLayerArray\n});\n*/\nvar selectHover = [];\nvar drawnFeatures = 0;\nvar turnLineIntoArrayOfPoints = function(geoJSONLine){\n  //if statement should check to make sure geoJSON line is valid\n  if(true){\n    var length = turf.lineDistance(geoJSONLine, 'miles');\n    for(var i=(Math.random()*(0.02)); i <= length; i=i+0.02){\n      if(length > 0 ){\n        var thisPoint = turf.along(geoJSONLine, i, 'miles');\n        if(resultsSourceArray[0]){\n          resultsSourceArray[0].addFeature(new Feature(new Point(transform([thisPoint.geometry.coordinates[0],thisPoint.geometry.coordinates[1]], 'EPSG:4326', 'EPSG:3857'))));\n        }\n      }\n    }\n    return;\n  }\n};\n\nclass App extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      title: 'NorthKC Bike Plan',\n      lineName: 'Draw Line',\n      features:[\n        {\n          name:'Add Bike Infrastructure',\n          prompt:'Where would you bike if it was comfortable?',\n          type:'line',\n          color: '#00c853',\n          viewResults: true\n        },\n        {\n          name:'Add Bike Share',\n          prompt:'Where would you want bike share?',\n          type:'point',\n          color: '#2196f3',\n          viewResults: true\n        },\n        {\n          name:'Unsafe Location',\n          prompt:'What locations feel unsafe or uncomfortable for biking?',\n          type:'point',\n          color: '#f44336',\n          viewResults: true\n        }\n      ],\n      drawing: false,\n      editing: false,\n      deleting: false,\n      view: 0,\n      popover: false,\n      targetFeatureId: null,\n      comment: undefined,\n      mode: 'map',\n      viewMap: true,\n      featureData: null\n    };\n    this.addInteraction = this.addInteraction.bind(this);\n    this.upload = this.upload.bind(this);\n    this.cancelEdit = this.cancelEdit.bind(this);\n    this.finishLine = this.finishLine.bind(this);\n    this.getResults = this.getResults.bind(this);\n    this.getInput = this.getInput.bind(this);\n    this.switchView = this.switchView.bind(this);\n    this.updateComment = this.updateComment.bind(this);\n    this.saveComment = this.saveComment.bind(this);\n    this.changeMode = this.changeMode.bind(this);\n    this.switchLayer = this.switchLayer.bind(this);\n    this.toggleEdit = this.toggleEdit.bind(this);\n    this.toggleDelete = this.toggleDelete.bind(this);\n\n  }\n\n  addInteraction(counter){\n    overlay.setPosition(undefined);\n    map.removeInteraction(select);\n    map.addInteraction(drawInteraction[counter]);\n    this.setState({\n      drawing: counter\n    });\n    document.getElementById('map').style.cursor = 'crosshair';\n  }\n\n  switchView(event, value){\n    if(value === 1){\n      this.setState({\n        view: 1\n      });\n      //map.addLayer(heatmapLayer);\n      this.state.features.map(function(item, count){\n         return map.removeLayer(layerArray[count+1]);\n      });\n      resultsLayerArray.map(function(item){\n        return map.addLayer(item);\n      });\n      map.removeOverlay(overlay);\n      map.removeInteraction(select);\n      this.getResults();\n    }\n    else{\n      this.setState({\n        view: 0\n      })\n      //map.removeLayer(heatmapLayer);\n      this.state.features.map(function(item, count){\n        return map.addLayer(layerArray[count+1]);\n      });\n      resultsLayerArray.map(function(item){\n        return map.removeLayer(item);\n      });\n      map.addOverlay(overlay);\n      map.addInteraction(select);\n      this.getInput();\n    }\n  }\n\n  switchLayer(count){\n    if(this.state.features[count].viewResults === true){\n      map.removeLayer(resultsLayerArray[count]);\n      var features = this.state.features;\n      var feature = features[count];\n      feature.viewResults= false;\n      this.setState({features:features});\n    }\n    else{\n      map.addLayer(resultsLayerArray[count]);\n\n      var features = this.state.features;\n      var feature = features[count];\n      feature.viewResults= true;\n      this.setState({features:features});\n    }\n  }\n\n  getInput(){\n    this.changeMode('map');\n  }\n\n  upload(){\n    overlay.setPosition(undefined);\n    var writer = new GeoJSON();\n    var drawnFeatures = [];\n    layerArray.map(function(item, counter){\n      if(counter > 0){\n        return drawnFeatures.push(writer.writeFeatures(item.getSource().getFeatures()));\n      }\n      else{\n        return null;\n      }\n    });\n    sourceArray.map(function(item, count){\n      return item.clear();\n    });\n    axios.post('/api/addLines', {\n      features: drawnFeatures\n    })\n    .then(function(response){\n      console.log(response);\n    });\n  }\n\n  cancelEdit(counter){\n    map.removeInteraction(drawInteraction[counter]);\n    map.addInteraction(select);\n    document.getElementById('map').style.cursor = 'default';\n    this.setState({\n      drawing: false\n    });\n  }\n\n  finishLine(counter){\n    if(drawInteraction[counter]){\n      drawInteraction[counter].finishDrawing();\n    }\n  }\n\n  deleteLastPoint(counter){\n    drawInteraction[counter].removeLastPoint();\n  }\n\n  getResults(){\n    axios.get('/api/results')\n    .then(function(response){\n      pointSource.clear();\n      resultsSourceArray.map(function(item){\n        return item.clear();\n      });\n      this.setState({featureData: response.data.data[0]});\n      var features = response.data.data[0];\n      features.map(function(feature, count){\n        if(feature.line){\n          return turnLineIntoArrayOfPoints(feature.line);\n        }\n        else{\n          this.state.features.map(function(featureLayer,count){\n            if(feature.name === featureLayer.name){\n              return resultsSourceArray[count].addFeature(new Feature(new Point(fromLonLat([feature.point.coordinates[0],feature.point.coordinates[1]]))));\n            }\n            else{\n              return null;\n            }\n          })\n        }\n      }.bind(this));\n    }.bind(this));\n  }\n\n  updateComment(event) {\n    this.setState({comment: event.target.value});\n  }\n\n  toggleEdit(){\n    overlay.setPosition(undefined);\n    if(this.state.editing === false){\n      this.setState({editing: true});\n      modify.map(function(layer){\n        return map.addInteraction(layer);\n      });\n      this.state.features.map(function(item, count){\n        console.log(item, count);\n        map.removeInteraction(selectHover[count]);\n        if(item.type === 'line'){\n          console.log(layerArray[count+1].getStyle());\n          layerArray[count+1].getStyle().getStroke().setColor(chroma(item.color).alpha(0.6).rgba());\n          layerArray[count+1].getStyle().getStroke().setLineDash([12,12,12,12]);\n          sourceArray[count].refresh()\n        }\n        else{\n          console.log(layerArray[count+1].getStyle().getImage().setOpacity(0.5));\n          layerArray[count+1].getStyle().setImage(\n            new Icon(({\n              anchor: [0.5, 60],\n              anchorXUnits: 'fraction',\n              anchorYUnits: 'pixels',\n              crossOrigin: 'anonymous',\n              src: PlaceSVG,\n              color: chroma(item.color).alpha(0.6).rgba(),\n              scale: 0.5\n            })),\n            new CircleStyle({\n              radius: 6,\n              fill: new Fill({\n                color: item.color\n              })\n            })\n          );\n          layerArray[count+1].getStyle().getImage().setOpacity(0.5);\n\n          sourceArray[count].refresh()\n          /*\n          layerArray[count+1].getStyle().getImage().setImage(\n            new CircleStyle({\n              radius: 6,\n              fill: new Fill({\n                color: item.color\n              })\n            })\n          );\n          */\n\n        }\n      });\n      map.removeInteraction(select);\n    }\n    else{\n      this.setState({editing: false});\n      modify.map(function(layer){\n        return map.removeInteraction(layer);\n      });\n      this.state.features.map(function(item, count){\n        map.addInteraction(selectHover[count]);\n\n        if(item.type === 'line'){\n          layerArray[count+1].getStyle().getStroke().setColor(chroma(item.color).alpha(1).rgba());\n          layerArray[count+1].getStyle().getStroke().setLineDash([1]);\n          sourceArray[count].refresh()\n        }\n      });\n      map.addInteraction(select);\n\n    }\n  }\n\n  toggleDelete(){\n    overlay.setPosition(undefined);\n    if(this.state.deleting === false){\n      this.setState({deleting: true});\n      map.removeInteraction(select);\n      map.addInteraction(selectDelete);\n\n    }\n    else{\n      this.setState({deleting: false});\n      map.addInteraction(select);\n      map.removeInteraction(selectDelete);\n    }\n  }\n\n  saveComment(event, target){\n    event.preventDefault();\n    var selectedFeature;\n    this.state.features.map(function(item, count){\n      if(sourceArray[count].getFeatureById(this.state.targetFeatureId)){\n        return selectedFeature = sourceArray[count].getFeatureById(this.state.targetFeatureId);\n      }\n    }.bind(this));\n    selectedFeature.setProperties({comment:this.state.comment});\n    overlay.setPosition(undefined);\n    this.setState({comment:''});\n    select.getFeatures().clear();\n  }\n\n  changeMode(mode){\n    if(mode === 'map'){\n      map.setTarget('map');\n      this.setState({viewMap: true});\n      this.setState({mode:'map'});\n    }\n    else{\n      map.setTarget(null);\n      this.setState({viewMap: false});\n      this.setState({mode: 'cards'});\n    }\n  }\n\n  render() {\n    return (\n      <MuiThemeProvider theme={theme}>\n        <div className=\"App\">\n          <AppBar position=\"fixed\" style={{zIndex: 1201, flexWrap:'wrap', width:'100%' }}>\n            <Toolbar style={{flexWrap:'wrap'}}>\n              <Typography variant=\"h6\" color=\"inherit\" style={{flexGrow:2}} id='menuTitle'>\n                <BikeIcon style={{verticalAlign:'middle', marginBottom:'5px', height:'32px'}} />\n                &nbsp;&nbsp;{this.state.title}\n              </Typography>\n              <Tabs value={this.state.view} style={{height:'64px'}} onChange = {this.switchView} variant='fullWidth' id='menuTabs'>\n                <Tab label={<span><EditIcon style={{verticalAlign:'middle',top:'0px'}}/>&nbsp;&nbsp; Input</span>} style={{height:'64px', flexGrow: 1}} />\n                <Tab label={<span><FireIcon style={{verticalAlign:'middle'}}/>&nbsp;&nbsp; Results</span>} style={{flexGrow: 1}} />\n              </Tabs>\n            </Toolbar>\n          </AppBar>\n          <Drawer variant=\"permanent\">\n            <div style={{width: drawerWidth, padding:'15px'}} id='sidebar'>\n              <Sidebar\n                view={this.state.view}\n                drawing={this.state.drawing}\n                editing={this.state.editing}\n                deleting = {this.state.deleting}\n                features = {this.state.features}\n                drawnFeatures = {drawnFeatures}\n                finishLine = {this.finishLine}\n                deleteLastPoint = {this.deleteLastPoint}\n                cancelEdit = {this.cancelEdit}\n                addInteraction = {this.addInteraction}\n                upload = {this.upload}\n                switchLayer={this.switchLayer}\n                changeMode = {this.changeMode}\n                toggleEdit =  {this.toggleEdit}\n                toggleDelete =  {this.toggleDelete}\n              />\n            </div>\n          </Drawer>\n          <MainDisplay mode={this.state.mode} data={this.state.featureData} />\n          <div id='map' className={this.state.viewMap ? '' : 'hidden'}></div>\n          <Paper id='popover' style={{width:'250px', padding: '15px', position: 'absolute', left:'-138px', top:'-218px'}}>\n            <form onSubmit={this.saveComment}>\n              <TextField\n                id='commentArea'\n                label=\"Add Comment:\"\n                multiline\n                rows=\"4\"\n                margin=\"normal\"\n                variant = 'outlined'\n                style = {{width:'100%'}}\n                value = {this.state.comment}\n                onChange = {this.updateComment}\n              />\n              <br />\n              <Button type='submit' variant='contained' color='primary' >Save</Button>\n            </form>\n            <div className='arrow'></div>\n          </Paper>\n        </div>\n      </MuiThemeProvider>\n    );\n  }\n  componentDidMount(){\n    layerArray.push(new TileLayer({\n      source: new TileWMS({\n        url: 'http://ec2-34-214-28-139.us-west-2.compute.amazonaws.com/geoserver/wms',\n        params: {'LAYERS': 'Mapalize:OSM-KC-ROADS', 'TILED': true},\n        serverType: 'geoserver',\n        transition: 0\n      })\n    }));\n    this.state.features.map(function(item, count){\n      sourceArray.push(new VectorSource());\n      resultsSourceArray.push(new VectorSource());\n      if(item.type === 'line'){\n        layerArray.push(new VectorLayer({\n          source: sourceArray[count],\n          style: new Style({\n              stroke: new Stroke({\n                color: item.color,\n                width: 8\n              })\n            })\n        }));\n        resultsLayerArray.push(new Heatmap({\n          source: resultsSourceArray[count],\n          renderMode: 'image',\n          shadow: 1000\n        }));\n        drawInteraction.push(\n          new Draw({\n            source: sourceArray[count],\n            type: 'LineString',\n            style: new Style({\n              stroke: new Stroke({\n                color: item.color,\n                width: 8\n              }),\n              image: new CircleStyle({\n                radius: 6,\n                fill: new Fill({\n                  color: item.color\n                })\n              })\n            })\n          })\n        );\n        selectHover.push(new Select({\n          condition: pointerMove,\n          style: new Style({\n            stroke: new Stroke({\n              color: item.color,\n              width: 8\n            }),\n            image: new CircleStyle({\n              radius: 6,\n              fill: new Fill({\n                color: item.color\n              })\n            })\n          }),\n          layers: [layerArray[count+1]]\n        }));\n      }\n      else{\n        layerArray.push(new VectorLayer({\n          source: sourceArray[count],\n          style: new Style({\n            image: new Icon(({\n              anchor: [0.5, 60],\n              anchorXUnits: 'fraction',\n              anchorYUnits: 'pixels',\n              crossOrigin: 'anonymous',\n              src: PlaceSVG,\n              color: item.color,\n              scale: 0.5\n            }))\n          })\n        }));\n\n        drawInteraction.push(\n          new Draw({\n            source: sourceArray[count],\n            type: 'Point',\n            style: new Style({\n              image: new Icon(({\n                anchor: [0.5, 60],\n                anchorXUnits: 'fraction',\n                anchorYUnits: 'pixels',\n                crossOrigin: 'anonymous',\n                src: PlaceSVG,\n                color: item.color,\n                scale: 0.5\n              }))\n            })\n          })\n        );\n        selectHover.push(new Select({\n          condition: pointerMove,\n          style: new Style({\n            image: new Icon(({\n              anchor: [0.5, 60],\n              anchorXUnits: 'fraction',\n              anchorYUnits: 'pixels',\n              crossOrigin: 'anonymous',\n              src: PlaceSVG,\n              color: item.color,\n              scale: 0.5\n            }))\n          }),\n          layers: [layerArray[count+1]]\n        }));\n        resultsLayerArray.push(\n          new AnimatedCluster({\n            source: new Cluster({\n              source: resultsSourceArray[count],\n              distance: 40\n            }),\n            animationDuration: 500,\n            style: function(feature){\n              var size = feature.get('features').length;\n              var style;\n              if(size < 2){\n                style = [new Style({\n                  image: new Icon(({\n                    anchor: [0.5, 60],\n                    anchorXUnits: 'fraction',\n                    anchorYUnits: 'pixels',\n                    crossOrigin: 'anonymous',\n                    src: PlaceSVG,\n                    color: item.color,\n                    scale: 0.5\n                  }))\n                })]\n              }\n              else{\n                style =\n                  [new Style({\n                    image:\n                      new CircleStyle({\n                        radius: 16,\n                        stroke: new Stroke({\n                          color:chroma(item.color).alpha(0.6).rgba(),\n                          width: 6\n                        }),\n                        fill: new Fill({\n                          color: item.color\n                        })\n                      }),\n\n                    text: new Text({\n                      text: size.toString(),\n                      fill: new Fill({\n                        color: '#fff'\n                      })\n                    })\n                  })]\n\n              }\n              return style;\n            }\n          })\n        );\n      };\n      modify.push(new Modify({\n        source: sourceArray[count],\n        style: new Style({\n          image: new CircleStyle({\n            radius: 6,\n            fill: new Fill({\n              color: '#fff'\n            }),\n            stroke: new Stroke({\n              width: 1,\n              color: '#000'\n            })\n          })\n        })\n      }));\n\n\n    });\n    this.getResults();\n\n    var container = document.getElementById('popover');\n    overlay.setElement(container);\n    map = new Map({\n        target: 'map',\n        layers: layerArray,\n        overlays: [overlay],\n        //interactions: defaultInteractions().extend([clusterSelect]),\n        view: new View({\n          center: fromLonLat([-94.573, 39.143]),\n          zoom: 14,\n          maxZoom: 20,\n          minZoom: 12\n        }),\n        controls: [\n          new Zoom()\n        ]\n      });\n\n      var resolution = map.getView().getResolution(),\n      radiusSize = 12,\n      blurSize = 64;\n      var zoomRadius = radiusSize/resolution;\n      var zoomBlur = blurSize/resolution;\n      resultsLayerArray[0].setRadius(zoomRadius);\n      resultsLayerArray[0].setBlur(zoomBlur);\n\n      map.getView().on('change:resolution', function(evt){\n          resolution = evt.target.get(evt.key);\n          zoomRadius =  radiusSize/resolution;\n          zoomBlur = blurSize/resolution;\n         resultsLayerArray[0].setRadius(zoomRadius);\n         resultsLayerArray[0].setBlur(zoomBlur);\n      });\n\n\n      select.on('select', function(e) {\n        var selectedFeature2 = e.selected[0];\n        if(selectedFeature2){\n          this.setState({targetFeatureId: e.selected[0].getId()});\n          console.log(e.selected[0].getProperties())\n          console.log(e.selected[0].getProperties().geometry);\n          this.setState({comment: selectedFeature2.getProperties().comment});\n          var coordinate;\n          if(e.selected[0].getGeometry().getType() === 'LineString'){\n            console.log('linestring')\n            coordinate = selectedFeature2.getGeometry().getCoordinateAt(0.5);\n          }\n          else{\n            coordinate = selectedFeature2.getGeometry().getCoordinates();\n          }\n\n          overlay.setPosition(coordinate);\n          this.setState({popover: true});\n        }\n        else{\n          console.log(e, 'nothing selected');\n          overlay.setPosition(undefined);\n          this.setState({popover: false});\n        }\n      }.bind(this));\n\n      drawInteraction.map(function(item, counter){\n        drawInteraction[counter].on('drawend', function(target){\n          target.feature.setProperties({layerName: this.state.features[counter].name});\n          this.setState({comment: ''});\n          var coordinate;\n          if(this.state.features[counter].type === 'line'){\n            coordinate = target.feature.getGeometry().getCoordinateAt(0.5);\n          }\n          else{\n            coordinate = target.feature.getGeometry().getCoordinates();\n          }\n          target.feature.setId(drawnFeatures);\n          drawnFeatures++;\n          overlay.setPosition(coordinate);\n          document.getElementById(\"commentArea\").focus();\n          this.setState({popover: true});\n          this.setState({targetFeatureId: target.feature.getId()});\n          console.log(target.feature);\n          this.cancelEdit(counter);\n        }.bind(this));\n      }.bind(this));\n\n\n      selectDelete.on('select', function(e) {\n        var selectedFeature = e.selected[0];\n        console.log(selectDelete.getFeatures());\n        if(selectedFeature){\n          sourceArray.map(function(layer, count){\n            if(layer.hasFeature(selectedFeature)){\n              layer.removeFeature(selectedFeature);\n              drawnFeatures--;\n              selectHover[count].getFeatures().clear();\n              document.getElementById('map').style.cursor = 'default';\n            }\n          })\n        }\n      }.bind(this));\n\n      selectHover.map(function(item, count){\n        return(\n          map.addInteraction(item),\n          item.on('select', function(e) {\n            if(e.selected.length > 0){\n              document.getElementById('map').style.cursor = 'pointer';\n            }\n            else{\n              document.getElementById('map').style.cursor = 'default';\n            }\n          })\n        )\n      });\n\n      /*\n      clusterSelect.on('select', function(e) {\n        if(e.selected.length > 0){\n          e.selected[0].getProperties().features.map(function(feature){\n            return console.log(feature.getProperties());\n          });\n          document.getElementById('map').style.cursor = 'pointer';\n        }\n        else{\n          document.getElementById('map').style.cursor = 'default';\n        }\n      });\n      */\n\n\n    }\n    componentDidUpdate(){\n      map.updateSize();\n    }\n}\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read http://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit http://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See http://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: http://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}