(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{123:function(e,t,a){e.exports=a.p+"static/media/place.f0e22054.svg"},177:function(e,t,a){},286:function(e,t,a){e.exports=a(533)},291:function(e,t,a){},533:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(65),i=a.n(l),s=(a(291),a(100)),o=a(101),c=a(105),d=a(102),u=a(106),m=a(27),p=(a(177),a(252)),h=a.n(p),g=a(195),f=a.n(g),y=a(135),w=a.n(y),E=a(132),v=a.n(E),b=(a(205),function(e){function t(){return Object(s.a)(this,t),Object(c.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return r.a.createElement(h.a,{style:{width:"100%"}},r.a.createElement(f.a,null,r.a.createElement(w.a,{style:{color:this.props.data.color,verticalAlign:"middle"}})," \xa0\xa0 ",r.a.createElement("strong",null,this.props.data.name)),r.a.createElement("div",{id:"cardmap-"+this.props.data.id,className:"cardmap"}),r.a.createElement(f.a,null,r.a.createElement(v.a,{component:"p"},this.props.data.line_comment)))}}]),t}(r.a.Component)),O=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(c.a)(this,Object(d.a)(t).call(this,e))).state={},a.renderMapCard=a.renderMapCard.bind(Object(m.a)(Object(m.a)(a))),a}return Object(u.a)(t,e),Object(o.a)(t,[{key:"renderMapCard",value:function(e){return r.a.createElement(b,{data:e})}},{key:"render",value:function(){if("map"===this.props.mode)return" ";var e=this.props.data.reverse().map(function(e){return console.log(e),r.a.createElement("div",{key:e.id,style:{width:"300px",flex:"1 auto",margin:"8px"}},this.renderMapCard(e))}.bind(this));return r.a.createElement("div",{id:"cards",style:{display:"flex",flexFlow:"row wrap",padding:"8px"}},e)}}]),t}(n.Component),x=a(64),k=a.n(x),j=a(97),I=a.n(j),S=a(60),C=a.n(S),L=a(136),F=a.n(L),P=a(198),A=a.n(P),D=a(254),M=a.n(D),R=a(260),N=a.n(R),B=a(258),U=a.n(B),z=a(256),G=a.n(z),T=a(120),V=a.n(T),W=a(257),Y=a.n(W),X=a(259),J=a.n(X),K=a(199),Z=a.n(K),$=a(264),_=a.n($),q=a(262),H=a.n(q),Q=a(263),ee=a.n(Q),te=a(261),ae=a.n(te),ne=a(255),re=a.n(ne),le=a(196),ie=a.n(le),se=a(197),oe=a.n(se),ce=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(c.a)(this,Object(d.a)(t).call(this,e))).state={},a.renderResultsLayerList=a.renderResultsLayerList.bind(Object(m.a)(Object(m.a)(a))),a}return Object(u.a)(t,e),Object(o.a)(t,[{key:"renderResultsLayerList",value:function(){var e=this.props.features.map(function(e,t){var a=this;return"point"===e.type?r.a.createElement(ie.a,{key:t,control:r.a.createElement(oe.a,{onChange:function(){return a.props.switchLayer(t)},checked:e.viewResults}),label:r.a.createElement("span",null,r.a.createElement(M.a,{style:{color:e.color,verticalAlign:"middle"}}),e.name)}):r.a.createElement(ie.a,{key:t,control:r.a.createElement(oe.a,{onChange:function(){return a.props.switchLayer(t)},checked:e.viewResults}),label:r.a.createElement("span",null,r.a.createElement("svg",{width:"10",height:"20",style:{verticalAlign:"middle"}},r.a.createElement("defs",null,r.a.createElement("linearGradient",{id:"grad1",x1:"0%",y1:"100%",x2:"0%",y2:"0%"},r.a.createElement("stop",{offset:"0%",style:{stopColor:"blue",stopOpacity:".2"}}),r.a.createElement("stop",{offset:"25%",style:{stopColor:"cyan",stopOpacity:".4"}}),r.a.createElement("stop",{offset:"50%",style:{stopColor:"lime",stopOpacity:".6"}}),r.a.createElement("stop",{offset:"75%",style:{stopColor:"yellow",stopOpacity:".8"}}),r.a.createElement("stop",{offset:"100%",style:{stopColor:"red",stopOpacity:"1"}}))),r.a.createElement("rect",{width:"10",height:"20",style:{fill:"url(#grad1)"}})),"\xa0\xa0",e.name)})}.bind(this));return r.a.createElement(re.a,null,e)}},{key:"render",value:function(){var e=this;if(0===this.props.view){if(!1!==this.props.drawing){var t=this.props.features[this.props.drawing];return console.log(t),"line"===t.type?r.a.createElement(C.a,null,r.a.createElement("div",{style:{padding:"8px"}},r.a.createElement("div",{style:{paddingLeft:"32px",textIndent:"-32px"}},r.a.createElement("strong",null,r.a.createElement(w.a,{style:{color:t.color,verticalAlign:"middle"}})," \xa0",t.name))),r.a.createElement(I.a,null),r.a.createElement("div",{style:{padding:"8px"}},r.a.createElement(k.a,{onClick:function(){return e.props.finishLine(e.props.drawing)},className:"full-width-left",size:"small"},r.a.createElement(G.a,null)," \xa0\xa0 Finish Line"),r.a.createElement("br",null),r.a.createElement(k.a,{onClick:function(){return e.props.deleteLastPoint(e.props.drawing)},className:"full-width-left",size:"small"},r.a.createElement(Y.a,null)," \xa0\xa0 Delete Last Point"),r.a.createElement("br",null),r.a.createElement(k.a,{onClick:function(){return e.props.cancelEdit(e.props.drawing)},className:"full-width-left",size:"small"},r.a.createElement(V.a,null)," \xa0\xa0 Cancel"))):(console.log("edit point"),r.a.createElement(C.a,null,r.a.createElement("div",{style:{padding:"8px"}},r.a.createElement("div",{style:{paddingLeft:"32px",textIndent:"-32px"}},r.a.createElement("strong",null,r.a.createElement(A.a,{style:{color:t.color,verticalAlign:"middle"}})," \xa0",t.name))),r.a.createElement(I.a,null),r.a.createElement("div",{style:{padding:"8px"}},r.a.createElement(k.a,{onClick:function(){return e.props.cancelEdit(e.props.drawing)},className:"full-width-left",size:"small"},r.a.createElement(V.a,null)," \xa0\xa0 Cancel"))))}return!0===this.props.editing?r.a.createElement(C.a,null,r.a.createElement("div",{style:{padding:"8px"}},r.a.createElement("div",{style:{paddingLeft:"32px",textIndent:"-32px"}},r.a.createElement("strong",null,r.a.createElement(F.a,{style:{verticalAlign:"middle"}})," \xa0\xa0Edit Features"))),r.a.createElement(I.a,null),r.a.createElement("div",{style:{padding:"8px"}},r.a.createElement(k.a,{onClick:this.props.toggleEdit,className:"full-width-left"},r.a.createElement(V.a,null)," \xa0\xa0 Stop Editing"))):!0===this.props.deleting?r.a.createElement(C.a,null,r.a.createElement("div",{style:{padding:"8px"}},r.a.createElement("div",{style:{paddingLeft:"32px",textIndent:"-32px"}},r.a.createElement("strong",null,r.a.createElement(Z.a,{style:{verticalAlign:"middle"}})," \xa0\xa0Delete Features"))),r.a.createElement(I.a,null),r.a.createElement("div",{style:{padding:"8px"}},r.a.createElement(k.a,{onClick:this.props.toggleDelete,className:"full-width-left"},r.a.createElement(V.a,null)," \xa0\xa0 Stop Deleting"))):r.a.createElement("div",null,r.a.createElement(C.a,null,r.a.createElement("div",{style:{padding:"8px"}},r.a.createElement("strong",null,r.a.createElement(U.a,{style:{verticalAlign:"middle"}})," \xa0 Create Features")),r.a.createElement(I.a,null),r.a.createElement("div",{style:{padding:"8px"}},this.props.features.map(function(e,t){var a=this;return r.a.createElement(J.a,{title:e.prompt,placement:"right",key:e.name},r.a.createElement(k.a,{onClick:(e.type,function(){return a.props.addInteraction(t)}),className:"full-width-left"},"line"===e.type?r.a.createElement(w.a,{style:{color:e.color}}):r.a.createElement(A.a,{style:{color:e.color}})," ",r.a.createElement("span",{style:{paddingLeft:"10px"}},e.name)))}.bind(this)))),r.a.createElement("br",null),r.a.createElement(C.a,{style:{padding:"8px"}},r.a.createElement(k.a,{disabled:!(this.props.drawnFeatures>0),onClick:this.props.toggleEdit,className:"full-width-left"},r.a.createElement(F.a,null)," \xa0\xa0 Edit Features"),r.a.createElement(k.a,{disabled:!(this.props.drawnFeatures>0),onClick:this.props.toggleDelete,className:"full-width-left"},r.a.createElement(Z.a,null)," \xa0\xa0 Delete Features")),r.a.createElement("br",null),r.a.createElement(k.a,{disabled:!(this.props.drawnFeatures>0),variant:"contained",color:"primary",onClick:this.props.upload,className:"full-width"},r.a.createElement(N.a,null)," \xa0\xa0 Upload"))}return r.a.createElement("div",null,r.a.createElement(C.a,null,r.a.createElement("div",{style:{padding:"8px"}},r.a.createElement(ae.a,{style:{verticalAlign:"middle"}})," \xa0\xa0 ",r.a.createElement("strong",null,"View Results As")),r.a.createElement(I.a,null),r.a.createElement("div",{style:{padding:"8px"}},r.a.createElement(k.a,{onClick:function(){return e.props.changeMode("map")},className:"full-width-left",size:"small"},r.a.createElement(H.a,null)," \xa0\xa0 Map"),r.a.createElement("br",null),r.a.createElement(k.a,{onClick:function(){return e.props.changeMode("cards")},className:"full-width-left",size:"small"},r.a.createElement(ee.a,null)," \xa0\xa0 Cards"))),r.a.createElement("br",null),r.a.createElement(C.a,null,r.a.createElement("div",{style:{padding:"8px"}},r.a.createElement(_.a,{style:{verticalAlign:"middle"}})," \xa0\xa0 ",r.a.createElement("strong",null,"View Layers")),r.a.createElement(I.a,null),r.a.createElement("div",{style:{padding:"8px 8px 8px 12px"}},this.renderResultsLayerList())))}}]),t}(n.Component),de=a(123),ue=a.n(de),me=a(174),pe=a(50),he=a(70),ge=a(67),fe=a(134),ye=a(158),we=a(44),Ee=a(81),ve=a(87),be=a(75),Oe=a(275),xe=a(95),ke=a(277),je=a(17),Ie=a(278),Se=a(276),Ce=a(175),Le=a(167),Fe=a(202),Pe=a(279),Ae=a(71),De=a(104),Me=a(19),Re=a(274),Ne=a(265),Be=a(267),Ue=a.n(Be),ze=a(268),Ge=a.n(ze),Te=a(272),Ve=a.n(Te),We=a(270),Ye=a.n(We),Xe=a(203),Je=a.n(Xe),Ke=a(271),Ze=a.n(Ke),$e=a(269),_e=a.n($e),qe=a(273),He=a.n(qe),Qe=a(133),et=a(193),tt=a.n(et),at=a(266),nt=a.n(at),rt=a(200),lt=a.n(rt),it=a(201),st=a.n(it),ot=a(142),ct=a.n(ot),dt=Object(Qe.createMuiTheme)({palette:{primary:tt.a,secondary:nt.a},typography:{useNextVariants:!0}}),ut=[],mt=[],pt=[],ht=[],gt={},ft=[],yt=[],wt=new he.a,Et=(new Fe.a({source:wt,renderMode:"image",shadow:1e3}),new Pe.a({autoPan:!0,autoPanAnimation:{duration:250}})),vt=new De.a({condition:Me.d,layers:mt}),bt=new De.a({condition:Me.d,layers:mt,style:new we.c({stroke:null,image:null})}),Ot=[],xt=0,kt=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(c.a)(this,Object(d.a)(t).call(this,e))).state={title:"NorthKC Bike Plan",lineName:"Draw Line",features:[{name:"Add Bike Infrastructure",prompt:"Where would you bike if it was comfortable?",type:"line",color:"#00c853",viewResults:!0},{name:"Add Bike Share",prompt:"Where would you want bike share?",type:"point",color:"#2196f3",viewResults:!0},{name:"Unsafe Location",prompt:"What locations feel unsafe or uncomfortable for biking?",type:"point",color:"#f44336",viewResults:!0}],drawing:!1,editing:!1,deleting:!1,view:0,popover:!1,targetFeatureId:null,comment:void 0,mode:"map",viewMap:!0,featureData:null},a.addInteraction=a.addInteraction.bind(Object(m.a)(Object(m.a)(a))),a.upload=a.upload.bind(Object(m.a)(Object(m.a)(a))),a.cancelEdit=a.cancelEdit.bind(Object(m.a)(Object(m.a)(a))),a.finishLine=a.finishLine.bind(Object(m.a)(Object(m.a)(a))),a.getResults=a.getResults.bind(Object(m.a)(Object(m.a)(a))),a.getInput=a.getInput.bind(Object(m.a)(Object(m.a)(a))),a.switchView=a.switchView.bind(Object(m.a)(Object(m.a)(a))),a.updateComment=a.updateComment.bind(Object(m.a)(Object(m.a)(a))),a.saveComment=a.saveComment.bind(Object(m.a)(Object(m.a)(a))),a.changeMode=a.changeMode.bind(Object(m.a)(Object(m.a)(a))),a.switchLayer=a.switchLayer.bind(Object(m.a)(Object(m.a)(a))),a.toggleEdit=a.toggleEdit.bind(Object(m.a)(Object(m.a)(a))),a.toggleDelete=a.toggleDelete.bind(Object(m.a)(Object(m.a)(a))),a}return Object(u.a)(t,e),Object(o.a)(t,[{key:"addInteraction",value:function(e){Et.setPosition(void 0),gt.removeInteraction(vt),gt.addInteraction(ft[e]),this.setState({drawing:e}),document.getElementById("map").style.cursor="crosshair"}},{key:"switchView",value:function(e,t){1===t?(this.setState({view:1}),this.state.features.map(function(e,t){return gt.removeLayer(mt[t+1])}),ht.map(function(e){return gt.addLayer(e)}),gt.removeOverlay(Et),gt.removeInteraction(vt),this.getResults()):(this.setState({view:0}),this.state.features.map(function(e,t){return gt.addLayer(mt[t+1])}),ht.map(function(e){return gt.removeLayer(e)}),gt.addOverlay(Et),gt.addInteraction(vt),this.getInput())}},{key:"switchLayer",value:function(e){var t;!0===this.state.features[e].viewResults?(gt.removeLayer(ht[e]),(t=this.state.features)[e].viewResults=!1,this.setState({features:t})):(gt.addLayer(ht[e]),(t=this.state.features)[e].viewResults=!0,this.setState({features:t}))}},{key:"getInput",value:function(){this.changeMode("map")}},{key:"upload",value:function(){Et.setPosition(void 0);var e=new ke.a,t=[];mt.map(function(a,n){return n>0?t.push(e.writeFeatures(a.getSource().getFeatures())):null}),ut.map(function(e,t){return e.clear()}),st.a.post("/api/addLines",{features:t}).then(function(e){console.log(e)})}},{key:"cancelEdit",value:function(e){gt.removeInteraction(ft[e]),gt.addInteraction(vt),document.getElementById("map").style.cursor="default",this.setState({drawing:!1})}},{key:"finishLine",value:function(e){ft[e]&&ft[e].finishDrawing()}},{key:"deleteLastPoint",value:function(e){ft[e].removeLastPoint()}},{key:"getResults",value:function(){st.a.get("/api/results").then(function(e){wt.clear(),pt.map(function(e){return e.clear()}),this.setState({featureData:e.data.data[0]}),e.data.data[0].map(function(e,t){if(e.line)return function(e){for(var t=lt.a.lineDistance(e,"miles"),a=.02*Math.random();a<=t;a+=.02)if(t>0){var n=lt.a.along(e,a,"miles");pt[0]&&pt[0].addFeature(new Ae.a(new pe.a(Object(je.g)([n.geometry.coordinates[0],n.geometry.coordinates[1]],"EPSG:4326","EPSG:3857"))))}}(e.line);this.state.features.map(function(t,a){return e.name===t.name?pt[a].addFeature(new Ae.a(new pe.a(Object(je.c)([e.point.coordinates[0],e.point.coordinates[1]])))):null})}.bind(this))}.bind(this))}},{key:"updateComment",value:function(e){this.setState({comment:e.target.value})}},{key:"toggleEdit",value:function(){Et.setPosition(void 0),!1===this.state.editing?(this.setState({editing:!0}),yt.map(function(e){return gt.addInteraction(e)}),this.state.features.map(function(e,t){console.log(e,t),gt.removeInteraction(Ot[t]),"line"===e.type?(console.log(mt[t+1].getStyle()),mt[t+1].getStyle().getStroke().setColor(ct()(e.color).alpha(.6).rgba()),mt[t+1].getStyle().getStroke().setLineDash([12,12,12,12]),ut[t].refresh()):(console.log(mt[t+1].getStyle().getImage().setOpacity(.5)),mt[t+1].getStyle().setImage(new xe.a({anchor:[.5,60],anchorXUnits:"fraction",anchorYUnits:"pixels",crossOrigin:"anonymous",src:ue.a,color:ct()(e.color).alpha(.6).rgba(),scale:.5}),new ve.a({radius:6,fill:new be.a({color:e.color})})),mt[t+1].getStyle().getImage().setOpacity(.5),ut[t].refresh())}),gt.removeInteraction(vt)):(this.setState({editing:!1}),yt.map(function(e){return gt.removeInteraction(e)}),this.state.features.map(function(e,t){gt.addInteraction(Ot[t]),"line"===e.type&&(mt[t+1].getStyle().getStroke().setColor(ct()(e.color).alpha(1).rgba()),mt[t+1].getStyle().getStroke().setLineDash([1]),ut[t].refresh())}),gt.addInteraction(vt))}},{key:"toggleDelete",value:function(){Et.setPosition(void 0),!1===this.state.deleting?(this.setState({deleting:!0}),gt.removeInteraction(vt),gt.addInteraction(bt)):(this.setState({deleting:!1}),gt.addInteraction(vt),gt.removeInteraction(bt))}},{key:"saveComment",value:function(e,t){var a;e.preventDefault(),this.state.features.map(function(e,t){if(ut[t].getFeatureById(this.state.targetFeatureId))return a=ut[t].getFeatureById(this.state.targetFeatureId)}.bind(this)),a.setProperties({comment:this.state.comment}),Et.setPosition(void 0),this.setState({comment:""}),vt.getFeatures().clear()}},{key:"changeMode",value:function(e){"map"===e?(gt.setTarget("map"),this.setState({viewMap:!0}),this.setState({mode:"map"})):(gt.setTarget(null),this.setState({viewMap:!1}),this.setState({mode:"cards"}))}},{key:"render",value:function(){return r.a.createElement(Qe.MuiThemeProvider,{theme:dt},r.a.createElement("div",{className:"App"},r.a.createElement(Ue.a,{position:"fixed",style:{zIndex:1201,flexWrap:"wrap",width:"100%"}},r.a.createElement(Ge.a,{style:{flexWrap:"wrap"}},r.a.createElement(v.a,{variant:"h6",color:"inherit",style:{flexGrow:2},id:"menuTitle"},r.a.createElement(_e.a,{style:{verticalAlign:"middle",marginBottom:"5px",height:"32px"}}),"\xa0\xa0",this.state.title),r.a.createElement(Ye.a,{value:this.state.view,style:{height:"64px"},onChange:this.switchView,variant:"fullWidth",id:"menuTabs"},r.a.createElement(Je.a,{label:r.a.createElement("span",null,r.a.createElement(F.a,{style:{verticalAlign:"middle",top:"0px"}}),"\xa0\xa0 Input"),style:{height:"64px",flexGrow:1}}),r.a.createElement(Je.a,{label:r.a.createElement("span",null,r.a.createElement(Ze.a,{style:{verticalAlign:"middle"}}),"\xa0\xa0 Results"),style:{flexGrow:1}})))),r.a.createElement(Ve.a,{variant:"permanent"},r.a.createElement("div",{style:{width:"220px",padding:"15px"},id:"sidebar"},r.a.createElement(ce,{view:this.state.view,drawing:this.state.drawing,editing:this.state.editing,deleting:this.state.deleting,features:this.state.features,drawnFeatures:xt,finishLine:this.finishLine,deleteLastPoint:this.deleteLastPoint,cancelEdit:this.cancelEdit,addInteraction:this.addInteraction,upload:this.upload,switchLayer:this.switchLayer,changeMode:this.changeMode,toggleEdit:this.toggleEdit,toggleDelete:this.toggleDelete}))),r.a.createElement(O,{mode:this.state.mode,data:this.state.featureData}),r.a.createElement("div",{id:"map",className:this.state.viewMap?"":"hidden"}),r.a.createElement(C.a,{id:"popover",style:{width:"250px",padding:"15px",position:"absolute",left:"-138px",top:"-218px"}},r.a.createElement("form",{onSubmit:this.saveComment},r.a.createElement(He.a,{id:"commentArea",label:"Add Comment:",multiline:!0,rows:"4",margin:"normal",variant:"outlined",style:{width:"100%"},value:this.state.comment,onChange:this.updateComment}),r.a.createElement("br",null),r.a.createElement(k.a,{type:"submit",variant:"contained",color:"primary"},"Save")),r.a.createElement("div",{className:"arrow"}))))}},{key:"componentDidMount",value:function(){mt.push(new Ie.a({source:new Se.a({url:"http://ec2-34-214-28-139.us-west-2.compute.amazonaws.com/geoserver/wms",params:{LAYERS:"Mapalize:OSM-KC-ROADS",TILED:!0},serverType:"geoserver",transition:0})})),this.state.features.map(function(e,t){ut.push(new he.a),pt.push(new he.a),"line"===e.type?(mt.push(new ge.a({source:ut[t],style:new we.c({stroke:new Ee.a({color:e.color,width:8})})})),ht.push(new Fe.a({source:pt[t],renderMode:"image",shadow:1e3})),ft.push(new fe.a({source:ut[t],type:"LineString",style:new we.c({stroke:new Ee.a({color:e.color,width:8}),image:new ve.a({radius:6,fill:new be.a({color:e.color})})})})),Ot.push(new De.a({condition:Me.j,style:new we.c({stroke:new Ee.a({color:e.color,width:8}),image:new ve.a({radius:6,fill:new be.a({color:e.color})})}),layers:[mt[t+1]]}))):(mt.push(new ge.a({source:ut[t],style:new we.c({image:new xe.a({anchor:[.5,60],anchorXUnits:"fraction",anchorYUnits:"pixels",crossOrigin:"anonymous",src:ue.a,color:e.color,scale:.5})})})),ft.push(new fe.a({source:ut[t],type:"Point",style:new we.c({image:new xe.a({anchor:[.5,60],anchorXUnits:"fraction",anchorYUnits:"pixels",crossOrigin:"anonymous",src:ue.a,color:e.color,scale:.5})})})),Ot.push(new De.a({condition:Me.j,style:new we.c({image:new xe.a({anchor:[.5,60],anchorXUnits:"fraction",anchorYUnits:"pixels",crossOrigin:"anonymous",src:ue.a,color:e.color,scale:.5})}),layers:[mt[t+1]]})),ht.push(new Ne.a({source:new Re.a({source:pt[t],distance:40}),animationDuration:500,style:function(t){var a,n=t.get("features").length;return a=n<2?[new we.c({image:new xe.a({anchor:[.5,60],anchorXUnits:"fraction",anchorYUnits:"pixels",crossOrigin:"anonymous",src:ue.a,color:e.color,scale:.5})})]:[new we.c({image:new ve.a({radius:16,stroke:new Ee.a({color:ct()(e.color).alpha(.6).rgba(),width:6}),fill:new be.a({color:e.color})}),text:new Oe.a({text:n.toString(),fill:new be.a({color:"#fff"})})})],a}}))),yt.push(new ye.a({source:ut[t],style:new we.c({image:new ve.a({radius:6,fill:new be.a({color:"#fff"}),stroke:new Ee.a({width:1,color:"#000"})})})}))}),this.getResults();var e=document.getElementById("popover");Et.setElement(e);var t=(gt=new me.a({target:"map",layers:mt,overlays:[Et],view:new Ce.a({center:Object(je.c)([-94.573,39.143]),zoom:14,maxZoom:20,minZoom:12}),controls:[new Le.a]})).getView().getResolution(),a=12/t,n=64/t;ht[0].setRadius(a),ht[0].setBlur(n),gt.getView().on("change:resolution",function(e){t=e.target.get(e.key),a=12/t,n=64/t,ht[0].setRadius(a),ht[0].setBlur(n)}),vt.on("select",function(e){var t,a=e.selected[0];a?(this.setState({targetFeatureId:e.selected[0].getId()}),console.log(e.selected[0].getProperties()),console.log(e.selected[0].getProperties().geometry),this.setState({comment:a.getProperties().comment}),"LineString"===e.selected[0].getGeometry().getType()?(console.log("linestring"),t=a.getGeometry().getCoordinateAt(.5)):t=a.getGeometry().getCoordinates(),Et.setPosition(t),this.setState({popover:!0})):(console.log(e,"nothing selected"),Et.setPosition(void 0),this.setState({popover:!1}))}.bind(this)),ft.map(function(e,t){ft[t].on("drawend",function(e){var a;e.feature.setProperties({layerName:this.state.features[t].name}),this.setState({comment:""}),a="line"===this.state.features[t].type?e.feature.getGeometry().getCoordinateAt(.5):e.feature.getGeometry().getCoordinates(),e.feature.setId(xt),xt++,Et.setPosition(a),document.getElementById("commentArea").focus(),this.setState({popover:!0}),this.setState({targetFeatureId:e.feature.getId()}),console.log(e.feature),this.cancelEdit(t)}.bind(this))}.bind(this)),bt.on("select",function(e){var t=e.selected[0];console.log(bt.getFeatures()),t&&ut.map(function(e,a){e.hasFeature(t)&&(e.removeFeature(t),xt--,Ot[a].getFeatures().clear(),document.getElementById("map").style.cursor="default")})}.bind(this)),Ot.map(function(e,t){return gt.addInteraction(e),e.on("select",function(e){e.selected.length>0?document.getElementById("map").style.cursor="pointer":document.getElementById("map").style.cursor="default"})})}},{key:"componentDidUpdate",value:function(){gt.updateSize()}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(kt,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[286,2,1]]]);
//# sourceMappingURL=main.6a9e6a7c.chunk.js.map